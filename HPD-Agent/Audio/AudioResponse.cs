using System.Diagnostics.CodeAnalysis;
using Microsoft.Extensions.AI;


/// <summary>
/// Complete audio processing response
/// </summary>
/// [Experimental("HPDAUDIO001")]
public sealed class AudioResponse
{
    /// <summary>Gets or sets the transcribed text from the input audio (if requested).</summary>
    public string? TranscribedText { get; set; }

    /// <summary>Gets or sets the response text generated by the LLM.</summary>
    public string ResponseText { get; set; } = string.Empty;

    /// <summary>Gets or sets the synthesized audio stream response.</summary>
    public Stream? AudioStream { get; set; }

    /// <summary>Gets or sets the performance metrics for this audio processing operation.</summary>
    public AudioProcessingMetrics Metrics { get; set; } = new();

    /// <summary>Gets or sets any warnings encountered during processing.</summary>
    public IList<string> Warnings { get; set; } = new List<string>();

    /// <summary>Gets or sets any additional properties associated with the audio response.</summary>
    public AdditionalPropertiesDictionary? AdditionalProperties { get; set; }
}

/// <summary>
/// Streaming audio processing update
/// </summary>
[Experimental("HPDAUDIO001")]
public sealed class AudioResponseUpdate
{
    /// <summary>Gets or sets the kind of update this represents.</summary>
    public AudioUpdateKind Kind { get; set; }

    /// <summary>Gets or sets the text content for this update (transcription or LLM response).</summary>
    public string? Text { get; set; }

    /// <summary>Gets or sets the audio chunk for this update.</summary>
    public Stream? AudioChunk { get; set; }

    /// <summary>Gets or sets the performance metrics for this update.</summary>
    public AudioProcessingMetrics? Metrics { get; set; }

    /// <summary>Gets or sets any additional properties associated with this update.</summary>
    public AdditionalPropertiesDictionary? AdditionalProperties { get; set; }
}

/// <summary>
/// Audio processing performance metrics
/// </summary>
[Experimental("HPDAUDIO001")]
public sealed class AudioProcessingMetrics
{
    /// <summary>Gets or sets the duration of the speech-to-text phase.</summary>
    public TimeSpan TranscriptionDuration { get; set; }

    /// <summary>Gets or sets the duration of the LLM processing phase.</summary>
    public TimeSpan LlmDuration { get; set; }

    /// <summary>Gets or sets the duration of the text-to-speech synthesis phase.</summary>
    public TimeSpan SynthesisDuration { get; set; }

    /// <summary>Gets or sets the total duration of the entire audio processing pipeline.</summary>
    public TimeSpan TotalDuration { get; set; }

    /// <summary>Gets or sets the size of the input audio in bytes.</summary>
    public long InputAudioBytes { get; set; }

    /// <summary>Gets or sets the size of the output audio in bytes.</summary>
    public long OutputAudioBytes { get; set; }

    /// <summary>Gets or sets the timestamp when processing completed.</summary>
    public DateTime ProcessedAt { get; set; } = DateTime.UtcNow;
}

/// <summary>
/// Audio processing update kinds
/// </summary>
[Experimental("HPDAUDIO001")]
public enum AudioUpdateKind
{
    /// <summary>Speech-to-text transcription has started.</summary>
    TranscriptionStarted,

    /// <summary>Speech-to-text transcription has been updated.</summary>
    TranscriptionUpdated,

    /// <summary>Speech-to-text transcription has completed.</summary>
    TranscriptionCompleted,

    /// <summary>LLM processing has started.</summary>
    LlmProcessing,

    /// <summary>LLM processing has completed.</summary>
    LlmCompleted,

    /// <summary>Text-to-speech synthesis has started.</summary>
    SynthesisStarted,

    /// <summary>Text-to-speech synthesis has completed.</summary>
    SynthesisCompleted,

    /// <summary>An error occurred during processing.</summary>
    Error
}
